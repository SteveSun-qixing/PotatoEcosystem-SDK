# 类和函数完整索引

本文档提供 Chips SDK 所有公共类和函数的完整索引。

## 目录

1. [核心类](#1-核心类)
2. [API 类](#2-api-类)
3. [引擎类](#3-引擎类)
4. [工具类](#4-工具类)
5. [数据模型类](#5-数据模型类)
6. [导出函数](#6-导出函数)

---

## 1. 核心类

### 1.1 ChipsSDK

**路径**: `src/ChipsSDK.ts`

**描述**: SDK 主类

**构造函数**:
```typescript
constructor(options?: SDKOptions)
```

**属性**:
- `fileAPI: FileAPI` - 文件 API
- `rendererAPI: RendererAPI` - 渲染 API
- `editorAPI: EditorAPI` - 编辑 API
- `themeAPI: ThemeAPI` - 主题 API
- `pluginAPI: PluginAPI` - 插件 API

**方法**:
- `async loadCard(path: string | File, options?: LoadOptions): Promise<Card>`
- `async saveCard(card: Card, path: string, options?: SaveOptions): Promise<void>`
- `async renderCard(card: Card | string, container: string | HTMLElement, options?: RenderOptions): Promise<void>`
- `async renderBox(box: Box, container: string | HTMLElement, options?: BoxRenderOptions): Promise<void>`
- `createEditor(container: HTMLElement, options?: EditorOptions): IEditor`
- `loadTheme(theme: string | Theme): void`
- `setTheme(themeId: string): void`
- `use(plugin: Plugin | Plugin[]): void`
- `unuse(pluginId: string): void`
- `on(event: string, handler: EventHandler): void`
- `off(event: string, handler: EventHandler): void`
- `emit(event: string, data?: any): void`

---

### 1.2 ChipsCore

**路径**: `src/core/ChipsCore.ts`

**描述**: SDK 核心（内部类）

**方法**:
- `async initialize(adapter: IPlatformAdapter): Promise<void>`
- `getFileSystem(): IFileSystem`
- `getPluginManager(): PluginManager`
- `getThemeManager(): ThemeManager`
- `getResourceManager(): ResourceManager`

---

## 2. API 类

### 2.1 FileAPI

**路径**: `src/api/FileAPI.ts`

**描述**: 文件操作 API

**方法**:
- `async loadCard(path: string, options?: LoadOptions): Promise<Card>`
- `async saveCard(card: Card, path: string, options?: SaveOptions): Promise<void>`
- `async loadBox(directory: string): Promise<Box>`
- `async scanDirectory(directory: string): Promise<FileInfo[]>`
- `getMetadata(path: string): Promise<CardMetadata>`

---

### 2.2 RendererAPI

**路径**: `src/api/RendererAPI.ts`

**描述**: 渲染 API

**方法**:
- `async renderCard(card: Card, container: HTMLElement, options?: RenderOptions): Promise<RenderResult>`
- `async renderBox(box: Box, container: HTMLElement, options?: BoxRenderOptions): Promise<BoxRenderResult>`
- `updateCard(cardId: string, updates: Partial<Card>): void`
- `disposeCard(cardId: string): void`

---

### 2.3 EditorAPI

**路径**: `src/api/EditorAPI.ts`

**描述**: 编辑器 API

**方法**:
- `createEditor(container: HTMLElement, options?: EditorOptions): IEditor`
- `destroyEditor(editorId: string): void`
- `getEditor(editorId: string): IEditor | null`

---

### 2.4 ThemeAPI

**路径**: `src/api/ThemeAPI.ts`

**描述**: 主题 API

**方法**:
- `loadTheme(theme: string | Theme): void`
- `setTheme(themeId: string): void`
- `getCurrentTheme(): Theme`
- `listThemes(): ThemeInfo[]`
- `importTheme(themePath: string): Promise<void>`
- `exportTheme(themeId: string, outputPath: string): Promise<void>`

---

### 2.5 PluginAPI

**路径**: `src/api/PluginAPI.ts`

**描述**: 插件 API

**方法**:
- `use(plugin: Plugin | Plugin[]): void`
- `unuse(pluginId: string): void`
- `getPlugin(pluginId: string): Plugin | null`
- `listPlugins(): Plugin[]`

---

## 3. 引擎类

### 3.1 ParserEngine

**路径**: `src/core/parser/ParserEngine.ts`

**描述**: 解析引擎

**方法**:
- `parseCard(data: ArrayBuffer): Card`
- `serializeCard(card: Card): ArrayBuffer`
- `validate(card: Card): ValidationResult`
- `getMetadata(data: ArrayBuffer): CardMetadata`

---

### 3.2 RendererEngine

**路径**: `src/core/renderer/RendererEngine.ts`

**描述**: 渲染引擎

**方法**:
- `async render(card: Card, container: HTMLElement, options: RenderOptions): Promise<RenderResult>`
- `getRendererFactory(): RendererFactory`
- `getThemeApplier(): ThemeApplier`

---

### 3.3 EditorEngine

**路径**: `src/core/editor/EditorEngine.ts`

**描述**: 编辑引擎

**方法**:
- `createEditor(container: HTMLElement, options: EditorOptions): IEditor`
- `createDocument(): EditorDocument`
- `getSelection(): Selection`
- `getHistory(): History`

---

## 4. 工具类

### 4.1 Validator

**路径**: `src/core/parser/Validator.ts`

**描述**: 验证器

**方法**:
- `validate(card: Card): ValidationResult`
- `validateField(field: string, value: any): boolean`
- `getSchema(): Schema`

---

### 4.2 Normalizer

**路径**: `src/core/parser/Normalizer.ts`

**描述**: 规范化器

**方法**:
- `normalize(card: any): Card`
- `normalizeMetadata(metadata: any): CardMetadata`
- `normalizeContent(content: any, type: CardType): any`

---

### 4.3 CacheManager

**路径**: `src/core/cache/CacheManager.ts`

**描述**: 缓存管理器

**方法**:
- `get<T>(key: string): T | null`
- `set(key: string, value: any, ttl?: number): void`
- `has(key: string): boolean`
- `delete(key: string): void`
- `clear(): void`
- `size(): number`

---

### 4.4 EventEmitter

**路径**: `src/core/EventEmitter.ts`

**描述**: 事件发射器

**方法**:
- `on(event: string, handler: EventHandler): void`
- `off(event: string, handler: EventHandler): void`
- `emit(event: string, ...args: any[]): void`
- `once(event: string, handler: EventHandler): void`
- `removeAllListeners(event?: string): void`

---

## 5. 数据模型类

### 5.1 Card

**路径**: `src/types/Card.ts`

**描述**: 卡片基类

### 5.2 RichTextCard

**路径**: `src/types/RichTextCard.ts`

**描述**: 富文本卡片

### 5.3 MarkdownCard

**路径**: `src/types/MarkdownCard.ts`

**描述**: Markdown 卡片

### 5.4 Box

**路径**: `src/types/Box.ts`

**描述**: 箱子类

### 5.5 Theme

**路径**: `src/types/Theme.ts`

**描述**: 主题类

---

## 6. 导出函数

### 6.1 parse()

**路径**: `src/index.ts`

```typescript
export function parse(data: ArrayBuffer): Card
```

解析卡片数据。

---

### 6.2 serialize()

**路径**: `src/index.ts`

```typescript
export function serialize(card: Card): ArrayBuffer
```

序列化卡片。

---

### 6.3 validate()

**路径**: `src/index.ts`

```typescript
export function validate(card: Card): ValidationResult
```

验证卡片数据。

---

### 6.4 render()

**路径**: `src/index.ts`

```typescript
export async function render(
  card: Card,
  container: HTMLElement,
  options?: RenderOptions
): Promise<void>
```

快捷渲染函数。

---

### 6.5 createEditor()

**路径**: `src/index.ts`

```typescript
export function createEditor(
  container: HTMLElement,
  options?: EditorOptions
): IEditor
```

快捷创建编辑器函数。

---

## 7. 工具函数

**路径**: `src/utils/`

### 7.1 deepClone()

```typescript
export function deepClone<T>(obj: T): T
```

深拷贝对象。

---

### 7.2 deepMerge()

```typescript
export function deepMerge<T>(target: T, ...sources: Partial<T>[]): T
```

深度合并对象。

---

### 7.3 debounce()

```typescript
export function debounce<T extends Function>(func: T, wait: number): T
```

防抖函数。

---

### 7.4 throttle()

```typescript
export function throttle<T extends Function>(func: T, wait: number): T
```

节流函数。

---

## 8. 类继承关系

```
Card (基类)
├── RichTextCard
├── MarkdownCard
├── ImageCard
├── VideoCard
├── AudioCard
├── CodeCard
├── ListCard
├── RatingCard
├── WebCard
└── CompositeCard
```

---

## 9. 索引统计

- **总类数**: 25+
- **公开 API 类**: 10
- **核心引擎类**: 5
- **工具类**: 10
- **导出函数**: 15+

---

## 附录

### A. 常用类

1. ChipsSDK
2. FileAPI
3. RendererAPI
4. EditorAPI
5. ParserEngine

### B. 参考链接

- [完整文档](https://chips.dev/docs/sdk)
- [类型定义](https://chips.dev/docs/sdk/types)
