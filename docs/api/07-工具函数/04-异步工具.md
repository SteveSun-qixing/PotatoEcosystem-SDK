# 异步工具

> 版本: 1.0.0  
> 源码: `Chips-SDK/src/utils/async.ts`

## 方法

### `delay(ms: number): Promise<void>`

延迟执行.

### `withTimeout<T>(promise, timeoutMs, timeoutError?): Promise<T>`

为 Promise 增加超时控制.

### `retry<T>(fn, options?): Promise<T>`

重试执行异步函数.

`RetryOptions`:

- `maxRetries?: number` (默认 3)
- `delayMs?: number` (默认 1000)
- `backoff?: boolean` (默认 true, 指数退避)
- `maxDelayMs?: number` (默认 30000)
- `shouldRetry?: (error) => boolean`
- `onRetry?: (error, attempt) => void`

### `concurrent<T>(tasks, limit): Promise<T[]>`

按并发限制执行.

### `debounce(fn, waitMs)` / `throttle(fn, limitMs)`

防抖与节流.

### `createCancellable<T>()`

创建可取消的 Promise, 返回:

- `promise`
- `resolve(value)`
- `reject(reason)`
- `cancel()`
- `isCancelled()`

### `sequence<T>(tasks): Promise<T[]>`

顺序执行任务.
