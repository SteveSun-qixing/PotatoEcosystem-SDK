# 示例代码

本文档提供 Chips SDK 常见使用场景的完整示例代码。

## 1. 基础使用

### 1.1 快速开始

```javascript
import ChipsSDK from '@chips/sdk';

// 初始化 SDK
const chips = new ChipsSDK();

// 加载并渲染卡片
const card = await chips.loadCard('card.card');
await chips.renderCard(card, '#container');
```

### 1.2 使用配置

```javascript
const chips = new ChipsSDK({
  storage: 'indexeddb',
  cache: true,
  offline: true,
  theme: 'dark'
});
```

## 2. 文件操作

### 2.1 加载卡片

```javascript
// 从路径加载
const card = await chips.loadCard('path/to/card.card');

// 从 URL 加载
const card = await chips.loadCard('https://example.com/card.card');

// 从 File 对象加载
const card = await chips.loadCard(fileObject);
```

### 2.2 保存卡片

```javascript
await chips.saveCard(card, 'output.card');
```

### 2.3 导入导出

```javascript
// 导出为 HTML
const html = await chips.exportToHTML(card);

// 导入 Markdown
const card = await chips.importFromMarkdown(markdown);
```

## 3. 渲染

### 3.1 基础渲染

```javascript
await chips.renderCard(card, '#container', {
  theme: 'dark',
  readOnly: true
});
```

### 3.2 渲染箱子

```javascript
await chips.renderBox('box/', '#container', {
  layout: 'grid',
  columns: 3
});
```

## 4. 编辑器

### 4.1 创建编辑器

```javascript
const editor = chips.createEditor('#editor', {
  mode: 'wysiwyg',
  toolbar: true,
  autoSave: true
});
```

### 4.2 编辑器事件

```javascript
editor.on('change', (delta) => {
  console.log('Content changed:', delta);
});

editor.on('save', async () => {
  const card = await editor.getCard();
  await chips.saveCard(card, 'output.card');
});
```

## 5. 插件

### 5.1 使用插件

```javascript
import MyPlugin from '@chips/plugin-my';

chips.use(MyPlugin);
```

### 5.2 开发插件

```javascript
const MyPlugin = {
  id: 'my-plugin',
  name: 'My Plugin',
  
  install(context) {
    context.registerCardType('custom', CustomRenderer);
  }
};

chips.use(MyPlugin);
```

## 6. 完整示例

### 6.1 笔记应用

```javascript
class NoteApp {
  constructor() {
    this.chips = new ChipsSDK();
    this.editor = null;
  }
  
  async init() {
    this.editor = this.chips.createEditor('#editor', {
      autoSave: true
    });
    
    this.editor.on('save', () => this.saveNote());
  }
  
  async createNote() {
    const card = await this.chips.createCard({ type: 'richtext' });
    this.editor.loadCard(card);
  }
  
  async saveNote() {
    const card = await this.editor.getCard();
    await this.chips.saveCard(card, `notes/${card.id}.card`);
  }
}

const app = new NoteApp();
await app.init();
```

### 6.2 博客系统

```javascript
// 服务端渲染
import { ChipsSDK } from '@chips/sdk/node';

export async function renderArticle(articleId) {
  const chips = new ChipsSDK();
  const article = await chips.loadCard(`articles/${articleId}.card`);
  
  const html = await chips.renderToHTML(article, {
    theme: 'blog',
    seo: true
  });
  
  return html;
}

// 客户端增强
import ChipsSDK from '@chips/sdk';

const chips = new ChipsSDK();
chips.enhance('#article', {
  interactive: true,
  lazyLoad: true
});
```

## 7. React 集成

```jsx
import { useEffect, useRef } from 'react';
import ChipsSDK from '@chips/sdk';

function CardViewer({ cardPath }) {
  const containerRef = useRef(null);
  const chipsRef = useRef(null);
  
  useEffect(() => {
    if (!chipsRef.current) {
      chipsRef.current = new ChipsSDK();
    }
    
    const loadAndRender = async () => {
      const card = await chipsRef.current.loadCard(cardPath);
      await chipsRef.current.renderCard(card, containerRef.current);
    };
    
    loadAndRender();
  }, [cardPath]);
  
  return <div ref={containerRef} />;
}
```

## 8. Vue 集成

```vue
<template>
  <div ref="container"></div>
</template>

<script>
import ChipsSDK from '@chips/sdk';

export default {
  props: ['cardPath'],
  data() {
    return {
      chips: null
    };
  },
  mounted() {
    this.chips = new ChipsSDK();
    this.loadCard();
  },
  methods: {
    async loadCard() {
      const card = await this.chips.loadCard(this.cardPath);
      await this.chips.renderCard(card, this.$refs.container);
    }
  },
  watch: {
    cardPath() {
      this.loadCard();
    }
  }
};
</script>
```

更多示例请访问：https://github.com/chips/chips-sdk/tree/main/examples
